#include <msp430.h>
#include "dr_tft.h"

//--------------P3.2---------------------------------
#define		LCD_CS_SET		P3OUT |= 0x04
#define 	LCD_CS_CLR		P3OUT &=~0x04
//--------------P3.4---------------------------------
#define 	LCD_RS_SET		P3OUT |= 0x10
#define 	LCD_RS_CLR		P3OUT &=~0x10
//--------------P1.4---------------------------------
#define 	LCD_RST_SET		P1OUT |= 0x10
#define 	LCD_RST_CLR		P1OUT &=~0x10

//--------------P2.7---------------------------------
#define 	LCD_SCL_SET		P2OUT |= 0x80
#define 	LCD_SCL_CLR		P2OUT &=~0x80
//--------------P3.3---------------------------------
#define 	LCD_SDA_SET		P3OUT |= 0x08
#define 	LCD_SDA_CLR		P3OUT &=~0x08

#define tft_send_and_wait(x, y) tft_SendCmd(x, y);__delay_cycles(MCLK_FREQ / 1000);
#define tft_send_and_wait2(x, y, z) tft_SendCmd(x, y);__delay_cycles(MCLK_FREQ / 1000 * z);
unsigned char  const Font_code8[][6] = {
{0x00,0x00,0x00,0x00,0x00,0x00},// (0)
{0x00,0x00,0x00,0x4F,0x00,0x00},//!(1)
{0x00,0x00,0x07,0x00,0x07,0x00},//"(2)
{0x00,0x14,0x7F,0x14,0x7F,0x14},//#(3)
{0x00,0x24,0x2A,0x7F,0x2A,0x12},//$(4)
{0x00,0x23,0x13,0x08,0x64,0x62},//%(5)
{0x00,0x36,0x49,0x55,0x22,0x50},//&(6)
{0x00,0x00,0x05,0x03,0x00,0x00},//'(7)
{0x00,0x00,0x1C,0x22,0x41,0x00},//((8)
{0x00,0x00,0x41,0x22,0x1C,0x00},//)(9)
{0x00,0x14,0x08,0x3E,0x08,0x14},//*(10)
{0x00,0x08,0x08,0x3E,0x08,0x08},//+(11)
{0x00,0x00,0x50,0x30,0x00,0x00},//,(12)
{0x00,0x08,0x08,0x08,0x08,0x08},//-(13)
{0x00,0x00,0x60,0x60,0x00,0x00},//.(14)
{0x00,0x20,0x10,0x08,0x04,0x02},///(15)
{0x00,0x3E,0x51,0x49,0x45,0x3E},//0(16)
{0x00,0x00,0x42,0x7F,0x40,0x00},//1(17)
{0x00,0x42,0x61,0x51,0x49,0x46},//2(18)
{0x00,0x21,0x41,0x45,0x4B,0x31},//3(19)
{0x00,0x18,0x14,0x12,0x7F,0x10},//4(20)
{0x00,0x27,0x45,0x45,0x45,0x39},//5(21)
{0x00,0x3C,0x4A,0x49,0x49,0x30},//6(22)
{0x00,0x01,0x71,0x09,0x05,0x03},//7(23)
{0x00,0x36,0x49,0x49,0x49,0x36},//8(24)
{0x00,0x06,0x49,0x49,0x29,0x1E},//9(25)
{0x00,0x00,0x36,0x36,0x00,0x00},//:(26)
{0x00,0x00,0x56,0x36,0x00,0x00},//;(27)
{0x00,0x08,0x14,0x22,0x41,0x00},//<(28)
{0x00,0x14,0x14,0x14,0x14,0x14},//=(29)
{0x00,0x00,0x41,0x22,0x14,0x08},//>(30)
{0x00,0x02,0x01,0x51,0x09,0x06},//?(31)
{0x00,0x32,0x49,0x79,0x41,0x3E},//@(32)
{0x00,0x7E,0x11,0x11,0x11,0x7E},//A(33)
{0x00,0x7F,0x49,0x49,0x49,0x3E},//B(34)
{0x00,0x3E,0x41,0x41,0x41,0x22},//C(35)
{0x00,0x7F,0x41,0x41,0x22,0x1C},//D(36)
{0x00,0x7F,0x49,0x49,0x49,0x41},//E(37)
{0x00,0x7F,0x09,0x09,0x09,0x01},//F(38)
{0x00,0x3E,0x41,0x49,0x49,0x7A},//G(39)
{0x00,0x7F,0x08,0x08,0x08,0x7F},//H(40)
{0x00,0x00,0x41,0x7F,0x41,0x00},//I(41)
{0x00,0x20,0x40,0x41,0x3F,0x01},//J(42)
{0x00,0x7F,0x08,0x14,0x22,0x41},//K(43)
{0x00,0x7F,0x40,0x40,0x40,0x40},//L(44)
{0x00,0x7F,0x02,0x04,0x02,0x7F},//M(45)
{0x00,0x7F,0x04,0x08,0x10,0x7F},//N(46)
{0x00,0x3E,0x41,0x41,0x41,0x3E},//O(47)
{0x00,0x7F,0x09,0x09,0x09,0x06},//P(48)
{0x00,0x3E,0x41,0x51,0x21,0x5E},//Q(49)
{0x00,0x7F,0x09,0x19,0x29,0x46},//R(50)
{0x00,0x46,0x49,0x49,0x49,0x31},//S(51)
{0x00,0x01,0x01,0x7F,0x01,0x01},//T(52)
{0x00,0x3F,0x40,0x40,0x40,0x3F},//U(53)
{0x00,0x1F,0x20,0x40,0x20,0x1F},//V(54)
{0x00,0x3F,0x40,0x38,0x40,0x3F},//W(55)
{0x00,0x63,0x14,0x08,0x14,0x63},//X(56)
{0x00,0x03,0x04,0x78,0x04,0x03},//Y(57)
{0x00,0x61,0x51,0x49,0x45,0x43},//Z(58)
{0x00,0x00,0x7F,0x41,0x41,0x00},//[(59)
{0x00,0x15,0x16,0x7C,0x16,0x15},//\(60)
{0x00,0x00,0x41,0x41,0x7F,0x00},//](61)
{0x00,0x04,0x02,0x01,0x02,0x04},//^(62)
{0x00,0x40,0x40,0x40,0x40,0x40},//_(63)
{0x00,0x00,0x01,0x02,0x04,0x00},//`(64)
{0x00,0x20,0x54,0x54,0x54,0x78},//a(65)
{0x00,0x7F,0x48,0x44,0x44,0x38},//b(66)
{0x00,0x38,0x44,0x44,0x44,0x20},//c(67)
{0x00,0x38,0x44,0x44,0x48,0x7F},//d(68)
{0x00,0x38,0x54,0x54,0x54,0x18},//e(69)
{0x00,0x08,0x7E,0x09,0x01,0x02},//f(70)
{0x00,0x0C,0x52,0x52,0x52,0x3E},//g(71)
{0x00,0x7F,0x08,0x04,0x04,0x78},//h(72)
{0x00,0x00,0x44,0x7D,0x40,0x00},//i(73)
{0x00,0x20,0x40,0x44,0x3D,0x00},//j(74)
{0x00,0x7F,0x10,0x28,0x44,0x00},//k(75)
{0x00,0x00,0x41,0x7F,0x40,0x00},//l(76)
{0x00,0x7E,0x02,0x0C,0x02,0x7C},//m(77)
{0x00,0x7E,0x04,0x02,0x02,0x7C},//n(78)
{0x00,0x38,0x44,0x44,0x44,0x38},//o(79)
{0x00,0x7C,0x14,0x14,0x14,0x08},//p(80)
{0x00,0x08,0x14,0x14,0x18,0x7C},//q(81)
{0x00,0x7C,0x08,0x04,0x04,0x08},//r(82)
{0x00,0x48,0x54,0x54,0x54,0x20},//s(83)
{0x00,0x04,0x3F,0x44,0x40,0x20},//t(84)
{0x00,0x3C,0x40,0x40,0x20,0x7C},//u(85)
{0x00,0x1C,0x20,0x40,0x20,0x1C},//v(86)
{0x00,0x3C,0x40,0x30,0x40,0x3C},//w(87)
{0x00,0x44,0x28,0x10,0x28,0x44},//x(88)
{0x00,0x0C,0x50,0x50,0x50,0x3C},//y(89)
{0x00,0x44,0x64,0x54,0x4C,0x44},//z(90)
{0x00,0x00,0x08,0x36,0x41,0x00},//{(91)
{0x00,0x00,0x00,0x7F,0x00,0x00},//|(92)
{0x00,0x00,0x41,0x36,0x08,0x00},//}(93)
{0x00,0x08,0x04,0x08,0x10,0x08},//~(94)
{0x00,0x08,0x08,0x2A,0x1C,0x08},//→(127)
{0x00,0x08,0x1C,0x2A,0x08,0x08},//←(128)
{0x00,0x04,0x02,0x7F,0x02,0x04},//↑(129)
{0x00,0x10,0x20,0x7F,0x20,0x10},//↓(130)
{0x00,0x1C,0x2A,0x32,0x2A,0x1C},//笑面(131)
{0x00,0x1C,0x22,0x44,0x22,0x1C}};//爱心(132)

//#if  (PRINTCHAR16 == 1)	//字体选择Fixedsys
/*--------------------------------------------------------------*/
//	  字体:	GulimChe12
//取码规则:	高位在前, 行列扫描, 阴码(1-亮, 0-灭)
//查表方法: 要显示的ASCII码-32就可以得到字库码的指针
unsigned char const Font_code16[][16] = {
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},// (0)
{0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x10,0x10,0x00,0x00},//!(1)
{0x00,0x00,0x24,0x24,0x24,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//"(3)
{0x00,0x00,0x48,0x48,0x48,0xFE,0x24,0x24,0x24,0x24,0x24,0x7F,0x12,0x12,0x12,0x00},//#(4)
{0x00,0x10,0x7C,0x92,0x92,0x12,0x14,0x18,0x30,0x50,0x90,0x92,0x92,0x7C,0x10,0x00},//$(5)
{0x00,0x00,0x8C,0x92,0x52,0x32,0x2C,0x10,0x08,0x68,0x94,0x92,0x92,0x60,0x00,0x00},//%(6)
{0x00,0x00,0x18,0x24,0x24,0x24,0x18,0x98,0xA4,0xA2,0x42,0x42,0xA2,0x9C,0x00,0x00},//&(7)
{0x00,0x00,0x10,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//'(8)
{0x00,0x20,0x10,0x08,0x08,0x04,0x04,0x04,0x04,0x04,0x04,0x08,0x08,0x10,0x20,0x00},//((9)
{0x00,0x04,0x08,0x10,0x10,0x20,0x20,0x20,0x20,0x20,0x20,0x10,0x10,0x08,0x04,0x00},//)(10)
{0x00,0x00,0x00,0x00,0x00,0x08,0x2A,0x1C,0x14,0x22,0x00,0x00,0x00,0x00,0x00,0x00},//*(11)
{0x00,0x00,0x00,0x00,0x10,0x10,0x10,0xFE,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00},//+(12)
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x08,0x00},//,(13)
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//-(14)
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x00,0x00},//.(15)
{0x00,0x00,0x40,0x40,0x20,0x20,0x10,0x10,0x08,0x08,0x04,0x04,0x02,0x02,0x00,0x00},///(16)
{0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x44,0x38,0x00,0x00},//0(17)
{0x00,0x00,0x10,0x1C,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x40,0x40,0x20,0x10,0x08,0x04,0x02,0x02,0x7E,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x40,0x40,0x3C,0x40,0x40,0x40,0x42,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x60,0x60,0x50,0x50,0x48,0x48,0x44,0x44,0xFE,0x40,0x40,0x40,0x00,0x00},
{0x00,0x00,0x7E,0x02,0x02,0x02,0x3E,0x42,0x40,0x40,0x40,0x42,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x02,0x02,0x3E,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x7E,0x40,0x20,0x20,0x10,0x10,0x10,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x3C,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x42,0x7C,0x40,0x40,0x42,0x42,0x3C,0x00,0x00},//9(25)
{0x00,0x00,0x00,0x00,0x08,0x08,0x00,0x00,0x00,0x00,0x08,0x08,0x00,0x00,0x00,0x00},//:(26)
{0x00,0x00,0x00,0x00,0x10,0x10,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x08,0x00,0x00},//;(27)
{0x00,0x00,0x00,0x40,0x30,0x08,0x06,0x01,0x06,0x08,0x30,0x40,0x00,0x00,0x00,0x00},//<(28)
{0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x00},//=(29)
{0x00,0x00,0x00,0x02,0x0C,0x10,0x60,0x80,0x60,0x10,0x0C,0x02,0x00,0x00,0x00,0x00},//>(30)
{0x00,0x00,0x38,0x44,0x82,0x82,0x40,0x20,0x10,0x10,0x10,0x00,0x10,0x10,0x00,0x00},//?(31)
{0x00,0x00,0x38,0x44,0x82,0xB2,0xAA,0xAA,0xAA,0xAA,0xD2,0x02,0x84,0x78,0x00,0x00},//@(32)
{0x00,0x00,0x10,0x10,0x10,0x28,0x28,0x28,0x44,0x44,0x7C,0x82,0x82,0x82,0x00,0x00},//A(33)
{0x00,0x00,0x3E,0x42,0x82,0x82,0x42,0x3E,0x42,0x82,0x82,0x82,0x42,0x3E,0x00,0x00},
{0x00,0x00,0x38,0x44,0x82,0x82,0x02,0x02,0x02,0x02,0x82,0x82,0x44,0x38,0x00,0x00},
{0x00,0x00,0x3E,0x42,0x42,0x82,0x82,0x82,0x82,0x82,0x82,0x42,0x42,0x3E,0x00,0x00},
{0x00,0x00,0xFE,0x02,0x02,0x02,0x02,0x7E,0x02,0x02,0x02,0x02,0x02,0xFE,0x00,0x00},
{0x00,0x00,0xFE,0x02,0x02,0x02,0x02,0x7E,0x02,0x02,0x02,0x02,0x02,0x02,0x00,0x00},
{0x00,0x00,0x38,0x44,0x82,0x02,0x02,0x02,0xE2,0x82,0x82,0x82,0xC4,0xB8,0x00,0x00},
{0x00,0x00,0x82,0x82,0x82,0x82,0x82,0xFE,0x82,0x82,0x82,0x82,0x82,0x82,0x00,0x00},
{0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x22,0x22,0x1C,0x00,0x00},
{0x00,0x00,0x82,0x42,0x22,0x12,0x0A,0x06,0x06,0x0A,0x12,0x22,0x42,0x82,0x00,0x00},
{0x00,0x00,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x7E,0x00,0x00},
{0x00,0x00,0x82,0x82,0xC6,0xC6,0xAA,0xAA,0x92,0x92,0x92,0x82,0x82,0x82,0x00,0x00},
{0x00,0x00,0x82,0x86,0x86,0x8A,0x8A,0x92,0x92,0xA2,0xA2,0xC2,0xC2,0x82,0x00,0x00},
{0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x44,0x38,0x00,0x00},
{0x00,0x00,0x3E,0x42,0x82,0x82,0x82,0x42,0x3E,0x02,0x02,0x02,0x02,0x02,0x00,0x00},
{0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0xA2,0x44,0xB8,0x00,0x00},
{0x00,0x00,0x3E,0x42,0x82,0x82,0x82,0x42,0x3E,0x42,0x82,0x82,0x82,0x82,0x00,0x00},
{0x00,0x00,0x7C,0x82,0x82,0x02,0x04,0x18,0x20,0x40,0x80,0x82,0x82,0x7C,0x00,0x00},
{0x00,0x00,0xFE,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x7C,0x00,0x00},
{0x00,0x00,0x82,0x82,0x82,0x44,0x44,0x44,0x28,0x28,0x28,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x92,0x92,0x92,0x92,0x92,0xAA,0xAA,0xAA,0x44,0x44,0x44,0x44,0x00,0x00},
{0x00,0x00,0x82,0x82,0x44,0x44,0x28,0x10,0x28,0x28,0x44,0x44,0x82,0x82,0x00,0x00},
{0x00,0x00,0x82,0x82,0x44,0x44,0x28,0x28,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x7E,0x40,0x20,0x20,0x10,0x10,0x08,0x08,0x04,0x04,0x02,0x7E,0x00,0x00},
{0x00,0x78,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x78,0x00},
{0x00,0x00,0x92,0x92,0x92,0xFF,0x92,0xAA,0xAA,0xAA,0x44,0x44,0x44,0x44,0x00,0x00},
{0x00,0x1E,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x1E,0x00},
{0x00,0x10,0x28,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00},
{0x00,0x04,0x08,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x40,0x7C,0x42,0x42,0x42,0xBC,0x00,0x00},
{0x00,0x00,0x02,0x02,0x02,0x02,0x3A,0x46,0x82,0x82,0x82,0x82,0x46,0x3A,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x84,0x02,0x02,0x02,0x02,0x84,0x78,0x00,0x00},
{0x00,0x00,0x80,0x80,0x80,0x80,0xB8,0xC4,0x82,0x82,0x82,0x82,0xC4,0xB8,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x44,0x82,0xFE,0x02,0x02,0x84,0x78,0x00,0x00},
{0x00,0x00,0x70,0x08,0x08,0x08,0x7E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x58,0x64,0x42,0x42,0x42,0x64,0x58,0x42,0x3C,0x00},
{0x00,0x00,0x02,0x02,0x02,0x02,0x3A,0x46,0x42,0x42,0x42,0x42,0x42,0x42,0x00,0x00},
{0x00,0x00,0x10,0x10,0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x10,0x10,0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x0C,0x00},
{0x00,0x00,0x02,0x02,0x02,0x42,0x22,0x12,0x0A,0x06,0x0A,0x12,0x22,0x42,0x00,0x00},
{0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x6E,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x3A,0x46,0x42,0x42,0x42,0x42,0x42,0x42,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x44,0x38,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x3A,0x46,0x82,0x82,0x82,0x46,0x3A,0x02,0x02,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0xB8,0xC4,0x82,0x82,0x82,0xC4,0xB8,0x80,0x80,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x74,0x0C,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x02,0x0C,0x30,0x40,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x08,0x08,0x08,0x08,0x7E,0x08,0x08,0x08,0x08,0x08,0x08,0x70,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x7C,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x82,0x44,0x44,0x28,0x28,0x10,0x10,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x92,0x92,0x92,0xAA,0x6C,0x44,0x44,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x44,0x28,0x10,0x10,0x28,0x44,0x82,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x82,0x44,0x44,0x28,0x28,0x10,0x10,0x0E,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x40,0x20,0x10,0x08,0x04,0x02,0x7E,0x00,0x00},
{0x00,0x60,0x10,0x10,0x10,0x10,0x10,0x0C,0x10,0x10,0x10,0x10,0x10,0x10,0x60,0x00},
{0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00},
{0x00,0x06,0x08,0x08,0x08,0x08,0x08,0x30,0x08,0x08,0x08,0x08,0x08,0x08,0x06,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x8C,0x72,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
};
/*--------------------------------------------------------------*/
//#endif

void tft_AddTxData(char val)
{
  //while(!(UCA0IFG & UCTXIFG)); //等待发送缓冲区空
 // UCA0TXBUF = (val >> 8) & 0xFF; //发送高位
  while(!(UCA0IFG & UCTXIFG)); //等待发送缓冲区空
  UCA0TXBUF = val & 0xFF; //发送低位
  while(UCA0STAT & UCBUSY); //等待最后一位实际送出
}
//向TFT屏发送一个地址，返回是否发送成功
int tft_SendIndex(char val)
{
  LCD_CS_CLR;
  LCD_RS_CLR;
  tft_AddTxData(val);
  LCD_CS_SET;
  return 1;
}
int tft_SendData(char val)
{
  LCD_CS_CLR;
  LCD_RS_SET;
  tft_AddTxData(val);
  LCD_CS_SET;
  return 1;
}
//初始化TFT
void initTFT()
{
  //初始化RS、CS端口
  P3DIR |= BIT2 + BIT4;
  P1DIR |= BIT4;

  //LCD背光
//  P3DIR |= BIT3;
//  P3OUT &= ~BIT3;

  //复位TFTLCD
  LCD_RST_CLR;
  __delay_cycles(20000);
  LCD_RST_SET;
  __delay_cycles(MCLK_FREQ / 1000 * 100); //延时100ms
  LCD_CS_SET; //不用时关掉片选，有利于SPI容错性

  //配置与TFTLCD通信的串口
  UCA0CTL1 |= UCSWRST;
  UCA0CTL0 = UCCKPL + UCMSB + UCMST + UCSYNC; //下降沿变数据、上升沿采样；高位先；8位模式；主机；3线；同步
  UCA0CTL1 = UCSSEL__SMCLK + UCSWRST;
  UCA0BRW = SMCLK_FREQ / SPI_FREQ;
  P3REN |= BIT4;
  P3OUT &= ~BIT4;
  P3SEL	|=BIT3;
  P2SEL |=BIT7;
  P3DIR |=BIT3;
  P2DIR |=BIT7;
  UCA0CTL1 &= ~UCSWRST;

  //写入初始化TFTLCD的指令
  tft_SendIndex(0x11);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendIndex(0x3a);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x55);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendIndex(0x26);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x04);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendIndex(0xf2);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x01);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendIndex(0xe0);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x3f);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x25);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x1c);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x1e);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x20);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x12);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x2a);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x90);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x24);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x11);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x00);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x00);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x00);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x00);
  __delay_cycles(MCLK_FREQ / 1000);
  tft_SendData(0x00);
  __delay_cycles(MCLK_FREQ / 1000);

  tft_SendIndex(0xe1);
  __delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x20);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x20);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x20);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x20);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x05);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x15);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0xa7);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x3d);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x18);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x25);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x2a);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x2b);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x2b);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x3a);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0xb1);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x08);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x08);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0xb4);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x07);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0xc0);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x0a);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x02);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0xc1);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x02);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0xc5);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x4f);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x5a);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0xc7);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x40);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0x2a);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x7f);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0x2b);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x9f);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0x36);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0xc0);
	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0xb7);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendIndex(0x29);
	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendIndex(0x2c);
	__delay_cycles(MCLK_FREQ / 1000);

}



//向TFT屏发送一个数据，返回是否发送成功


//向TFT屏的寄存器reg发送数据data，返回是否发送成功
int tft_SendCmd(unsigned int reg, unsigned int data)
{
  tft_SendIndex(reg);
  tft_SendData(data);
  return 1;
}

void tft_AddTxData16(unsigned int val)
{
	LCD_RS_SET;
	LCD_CS_CLR;
	while(!(UCA0IFG & UCTXIFG)); //等待发送缓冲区空
	UCA0TXBUF = (val >> 8) & 0xFF; //发送高位
	while(!(UCA0IFG & UCTXIFG)); //等待发送缓冲区空
	UCA0TXBUF = val & 0xFF; //发送低位
	while(UCA0STAT & UCBUSY); //等待最后一位实际送出
	LCD_CS_SET;
}

//重置地址
void tft_AddressRst()
{
	tft_SendIndex(0x2a);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x7f);
//	__delay_cycles(MCLK_FREQ / 1000);

	tft_SendIndex(0x2b);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x9f);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendIndex(0x2c);
//	__delay_cycles(MCLK_FREQ / 1000);
}

void tft_DisplayFul(unsigned int color)
{
	unsigned int i,j;
	tft_AddressRst();
	for(i=0;i<160;i++)
	{
		for(j=0;j<128;j++)
		{
			tft_AddTxData16(color);
		}
	}
}
void tft_SetPos(char xs,char ys,char xe,char ye)
{
	tft_SendIndex(0x2A);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(xs);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(xe);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendIndex(0x2B);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(ys);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(0x00);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendData(ye);
//	__delay_cycles(MCLK_FREQ / 1000);
	tft_SendIndex(0x2C);
//	__delay_cycles(MCLK_FREQ / 1000);
}
void tft_printc16(char y,char x,char c_dat,unsigned int word_color,unsigned int back_color)
{
	char i,j;

		tft_SetPos(x*16,y*8,(x+1)*16-1,(y+1)*8-1);			//定位字符显示区域

		for(j=0; j<8; j++)
		{
			for(i=0; i<16; i++)
			{
				if((Font_code16[c_dat-32][16-i]) & (0x01<<j))
					tft_AddTxData16(word_color);
				else
					tft_AddTxData16(back_color);
			}
		}
}
void tft_prints16(char x,char y,char *s_dat,unsigned int word_color,unsigned int back_color)
{
	while(*s_dat) tft_printc16(x++,7-y,*s_dat++,word_color,back_color);
}

void tft_draw_part(char xs,char ys,char xe,char ye,unsigned int color_dat)
{
	char i,j;

		tft_SetPos(xs,ys,xe,ye);
		for(j=0;j<(ye-ys+1);j++)
	    {
	    	for(i=0;i<(xe-xs+1);i++)
			{
	    		tft_AddTxData16(color_dat);
			}
		}
}
void tft_printc(char x, char y, char c_dat,unsigned int word_color,unsigned int back_color)
{
	char i,j;

	tft_SetPos(x*8,y*8,(x+1)*8-1,(y+1)*8-1);			//定位字符显示区域

	for(j=0; j<8; j++)
	{
		tft_AddTxData16(back_color);
		for(i=0; i<6; i++)
		{
			if((Font_code8[c_dat-32][i]) & (0x01<<j))
				tft_AddTxData16(word_color);
			else
				tft_AddTxData16(back_color);
		}
		tft_AddTxData16(back_color);
	}
}
void tft_prints(char x, char y, char *s_dat,unsigned int word_color,unsigned int back_color)
{
	while(*s_dat) tft_printc(x++, y, *s_dat++,word_color,back_color);
}
void tft_draw_dot(char x,char y,unsigned int color_dat)
{
	tft_SetPos(x,y,x,y);
	tft_AddTxData16(color_dat);
}
void tft_draw_line(char xs,char ys,char xe,char ye,unsigned int color_dat)
{
	char i,ds;
	int dx,dy,inc_x, inc_y;
	int xerr = 0, yerr = 0;				//初始化变量

	if(xs==xe)	  						//如果是画垂直线则只需对竖直坐标计数
	{
    	tft_SetPos(xs,ys,xe,ye);
		for(i=0;i<(ye-ys+1);i++)
		{
			tft_AddTxData16(color_dat);
		}
	}
	else if(ys==ye)						//如果是水平线则只需要对水平坐标计数
    {
 		tft_SetPos(xs,ys,xe,ye);
 	  	for(i=0;i<(xe-xs+1);i++)
		{
 	  		tft_AddTxData16(color_dat);
		}
	}
	else											//如果是斜线，则重新计算，使用画点函数画出直线
	{
    	dx = xe - xs;								//计算坐标增量
    	dy = ye - ys;

		if(dx > 0) inc_x = 1;						//设置单步方向
		else
		{
			inc_x = -1; dx = -dx;
		}
		if(dy > 0) inc_y = 1;						//设置单步方向
		else
	    {
			inc_y = -1; dy = -dy;
		}

		if(dx > dy) ds = dx;						//选取基本增量坐标轴
		else		ds = dy;

		for(i = 0; i <= ds+1; i++)					//画线输出
		{
			tft_draw_dot(xs, ys,color_dat);	//画点
			xerr += dx;
			yerr += dy;
			if(xerr > ds)
			{
				xerr -= ds;
				xs   += inc_x;
			}
			if(yerr > ds)
			{
				yerr -= ds;
				ys   += inc_y;
			}
		}
	}
}

void tft_draw_rectangle(char xs,char ys,char xe,char ye,unsigned int color_dat)
{
	tft_draw_line(xs,ys,xs,ye,color_dat);	  //画矩形左边
	tft_draw_line(xe,ys,xe,ye,color_dat);	  //画矩形右边
	tft_draw_line(xs,ys,xe,ys,color_dat);	  //画矩形上边
	tft_draw_line(xs,ye,xe,ye,color_dat);	  //画矩形下边
}
void tft_draw_circle(char x,char y,char r,unsigned int color_dat)
{
	unsigned char dx, dy = r;

	if((x>=r) &&((128-x)>=r) && (y>=r) && ((160-y)>=r))		//确定所画圆在屏幕范围内，没有超出最外边，(暂不支持与屏幕边相交)
	{
		for(dx = 0; dx <= r; dx++)
		{
			while((r * r + 1 - dx * dx) < (dy * dy)) dy--;
			tft_draw_dot(x + dx, y - dy, color_dat);
			tft_draw_dot(x - dx, y - dy, color_dat);
			tft_draw_dot(x - dx, y + dy, color_dat);
			tft_draw_dot(x + dx, y + dy, color_dat);

			tft_draw_dot(x + dy, y - dx, color_dat);
			tft_draw_dot(x - dy, y - dx, color_dat);
			tft_draw_dot(x - dy, y + dx, color_dat);
			tft_draw_dot(x + dy, y + dx, color_dat);
	}
	}



}
void tft_printc6(char y, char x, char c_dat,unsigned int word_color,unsigned int back_color)
{
	char i,j;

	tft_SetPos(x*8,y*6,(x+1)*8-1,(y+1)*6-1);			//定位字符显示区域

	for(j=0; j<6; j++)
	{
		for(i=0; i<8; i++)
		{
			if((Font_code8[c_dat-32][j]) & (0x80>>i))
				tft_AddTxData16(word_color);
			else
				tft_AddTxData16(back_color);
		}
	}
}

void tft_prints6(char x, char y, char *s_dat,unsigned int word_color,unsigned int back_color)
{
	while(*s_dat) tft_printc6(x++, 15-y, *s_dat++,word_color,back_color);
}
